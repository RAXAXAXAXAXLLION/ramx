<!DOCTYPE html>
<!-- saved from url=(0036)http://matkcy.github.io/surface.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Implicit 3d Plot</title>
    
    <!-- Latest compiled and minified CSS-->
    <link rel="stylesheet" href="./plots_files/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="./plots_files/bootstrap.min(1).css">
    <script src="./plots_files/jquery.min.js.descarga"></script>
    <script src="./plots_files/bootstrap.min.js.descarga"></script>
    <script src="./plots_files/jquery.min.js.descarga"></script>
    <script type="text/javascript" src="./plots_files/jsapi"></script>
<link id="avast_os_ext_custom_font" href="./plots_files/css" rel="stylesheet" type="text/css"><link href="./plots_files/css(1)" rel="stylesheet" type="text/css"><link href="./plots_files/css(2)" rel="stylesheet" type="text/css"><link href="./plots_files/css(3)" rel="stylesheet" type="text/css"><style id="wrc-css" type="text/css">.wrcx {display:none} .r .wrcx,  .fc .wrcx, #rhsline ol .wrcx {display:inline-block !important; position:relative !important; background: url("chrome-extension://gomekmidlodglbbmalcneegieacbdmki/common/ui/icons/serp-none.png") right no-repeat},.wrcx {display:none} .osl .wrcx, .vresult .r, .tl .r .wrcx{ display: none;}
.wrc0 {display:none} .r .wrc0,  .fc .wrc0, #rhsline ol .wrc0 {display:inline-block !important; position:relative !important; background: url("chrome-extension://gomekmidlodglbbmalcneegieacbdmki/common/ui/icons/serp-none.png") right no-repeat},.wrc0 {display:none} .osl .wrc0, .vresult .r, .tl .r .wrc0{ display: none;}
.wrc1 {display:none} .r .wrc1,  .fc .wrc1, #rhsline ol .wrc1 {display:inline-block !important; position:relative !important; background: url("chrome-extension://gomekmidlodglbbmalcneegieacbdmki/common/ui/icons/serp-ok.png") right no-repeat},.wrc1 {display:none} .osl .wrc1, .vresult .r, .tl .r .wrc1{ display: none;}
.wrc2 {display:none} .r .wrc2,  .fc .wrc2, #rhsline ol .wrc2 {display:inline-block !important; position:relative !important; background: url("chrome-extension://gomekmidlodglbbmalcneegieacbdmki/common/ui/icons/serp-attention.png") right no-repeat},.wrc2 {display:none} .osl .wrc2, .vresult .r, .tl .r .wrc2{ display: none;}
.wrc3 {display:none} .r .wrc3,  .fc .wrc3, #rhsline ol .wrc3 {display:inline-block !important; position:relative !important; background: url("chrome-extension://gomekmidlodglbbmalcneegieacbdmki/common/ui/icons/serp-error.png") right no-repeat},.wrc3 {display:none} .osl .wrc3, .vresult .r, .tl .r .wrc3{ display: none;}
#wrcHoverDiv .aos-tooltip-logo-img { background-image: url(chrome-extension://gomekmidlodglbbmalcneegieacbdmki/common/ui/icons/logo-white.png); }
#wrcHoverDiv .aos-tooltip-attention .aos-tooltip-logo-img { background-image: url(chrome-extension://gomekmidlodglbbmalcneegieacbdmki/common/ui/icons/logo-dark.png); }</style></head>


<body>

<!--
<ul class="nav nav-pills">
  <li role="presentation" class="dropdown">
    <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
      Menu <span class="caret"></span>
    </a>
    <ul class="dropdown-menu">
        <li><a href="#">HTML</a></li>
        <li><a href="#">CSS</a></li>
        <li><a href="#">JavaScript</a></li>
    </ul>
  </li>
  
   


</ul>
-->

<br>
<ul class="nav nav-pills">
<div class="row">
  <div class="col-lg-6">
    <div class="input-group">
      <div class="input-group-btn">
        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Menu <span class="caret"></span>
        </button>
        <div class="dropdown-menu">
          <li><a href="http://matkcy.github.io/surface.html">1 Surface</a></li>
        <li><a href="http://matkcy.github.io/2surfaces.html">2 Surfaces</a></li>
        <li><a href="http://matkcy.github.io/MA1104-3dcurve.html">Space Curve</a></li>
        </div>
      </div>
      <input type="text" class="form-control" placeholder="Enter equation here" aria-label="Text input with dropdown button" id="fun" value="Math.cos(x) + Math.cos(y) + Math.cos(z)">
        <span class="input-group-addon"> = 0.</span>
        <span class="input-group-btn">
        <input class="btn btn-default" id="fun" type="submit" value="Go!" onclick="fxyz(), refresh(), init(), animate()">
      </span>
    </div>
  </div>

<div style="position: absolute; top: 0px; width: 100%;font-family:arial; font-weight: bolder; padding-top: 5px;">
    
</div>

<div class="container">
  <!-- Trigger the modal with a button -->
  <button type="button" class="btn btn-info" data-toggle="modal" data-target="#myModal">How to enter math expressions</button>

  <!-- Modal -->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">Ã—</button>
          <h4 class="modal-title">Some mathematical expressions</h4>
        </div>
        <div class="modal-body">
          <p>Mathematical functions and constants can be called by using Math  as an object. For example, 


 </p><li> Math.E: the constant e,

 </li><li> Math.PI: the constant Pi. 
 
 </li><li> Math.sin(x): function sin(x),
 
 </li><li> Math.cos(x): function cos(x), 
 
 </li><li> Math.tan(x): function tan(x), 
 
 </li><li> Math.pow(a,b): a to the power of b,
 
 </li><li> Math.log(x): log x of base e),
 
 </li><li> Math.exp(x) (exponent of x), 
 
 </li><li> Math.abs(x): absolute value of x, 
 
 </li><li> Math.sqrt(x): square root of x.

</li><li> Some common operations:


</li><li> * : multiply
</li><li> / : divide

 <p></p>
        </li></div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>
  
</div>


</div></ul>
<!--<body style='margin: 0px; overflow: hidden; text-align:center;'>-->

<script type="text/javascript" src="./plots_files/three.min.js.descarga"></script>
<script src="./plots_files/OrbitControls.js.descarga"></script>
<script src="./plots_files/MarchingCubesData.js.descarga"></script>




<script type="text/javascript">
function fxyz(){
    var myfun = document.getElementById("fun").value;
    
    function func(x,y,z){
        return eval(myfun);
    }
    return func;
}



function refresh(){
    scene.remove(mesh);
    mesh = [];
    points = [];
    values = [];
    }


    //////////////////////////////////////////////////////////////////////////////////
    //      Init
    //////////////////////////////////////////////////////////////////////////////////
    // init renderer
    var renderer    = new THREE.WebGLRenderer({
        antialias   : true
    });
    renderer.setClearColor(new THREE.Color('white'), 1)
    renderer.setSize( window.innerWidth, window.innerHeight );
    document.body.appendChild( renderer.domElement );
    // array of functions for the rendering loop
    var onRenderFcts= [];
    var mesh=[];
    var points = [];
    var values = [];
    var size;
    // init scene and camera
    var scene   = new THREE.Scene();
    axis = new THREE.AxisHelper(100);
    scene.add(axis);
    var camera  = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 20000);
    camera.up = new THREE.Vector3( 0, 0, 1 );
    camera.position.set( 45, 30, 20 );
    //camera.position.z = 2;
    var controls    = new THREE.OrbitControls(camera, renderer.domElement)
    //////////////////////////////////////////////////////////////////////////////////
    //      add an object in the scene
    //////////////////////////////////////////////////////////////////////////////////
    // add a torus  
    //var geometry    = new THREE.TorusKnotGeometry(0.5-0.12, 0.12);
    //var material    = new THREE.MeshNormalMaterial(); 
    //var mesh    = new THREE.Mesh( geometry, material );
    //scene.add( mesh );
    //init()

    init();
    animate();
    //////////////////////////////////////////////////////////////////////////////////
    //      render the whole thing on the page
    //////////////////////////////////////////////////////////////////////////////////
    // handle window resize
    window.addEventListener('resize', function(){
        renderer.setSize( window.innerWidth, window.innerHeight )
        camera.aspect   = window.innerWidth / window.innerHeight
        camera.updateProjectionMatrix()     
    }, false)
    // render the scene
    onRenderFcts.push(function(){
        renderer.render(scene, camera);       
    })
    
    // run the rendering loop
    var lastTimeMsec= null
    requestAnimationFrame(function animate(nowMsec){
        // keep looping
        requestAnimationFrame(animate);
        // measure time
        lastTimeMsec    = lastTimeMsec || nowMsec-1000/60
        var deltaMsec   = Math.min(200, nowMsec-lastTimeMsec)
        lastTimeMsec    = nowMsec
        // call each update function
        onRenderFcts.forEach(function(onRenderFct){
            onRenderFct(deltaMsec/1000, nowMsec/1000)
        })
    })





function init(){
    // number of cubes along a side
    size = 30;
    var axisMin = -10;
    var axisMax =  10;
    var axisRange = axisMax - axisMin;
    // Generate a list of 3D points and values at those points
    for (var k = 0; k < size; k++)
    for (var j = 0; j < size; j++)
    for (var i = 0; i < size; i++)
    {// actual values
        var x = axisMin + axisRange * i / (size - 1);
        var y = axisMin + axisRange * j / (size - 1);
        var z = axisMin + axisRange * k / (size - 1);
        points.push( new THREE.Vector3(x,y,z) );
        //var value = Math.cos(x) + Math.cos(y) + Math.cos(z);
        var value = fxyz()(x,y,z);
        values.push( value );
    }
    // Marching Cubes Algorithm
    var size2 = size * size;
    var vlist = new Array(12);
    var geometry = new THREE.Geometry();
    var vertexIndex = 0;
    
    for (var z = 0; z < size - 1; z++)
    for (var y = 0; y < size - 1; y++)
    for (var x = 0; x < size - 1; x++)
    {
        // index of base point, and also adjacent points on cube
        var p    = x + size * y + size2 * z,
            px   = p   + 1,
            py   = p   + size,
            pxy  = py  + 1,
            pz   = p   + size2,
            pxz  = px  + size2,
            pyz  = py  + size2,
            pxyz = pxy + size2;
        
        // store scalar values corresponding to vertices
        var value0 = values[ p    ],
            value1 = values[ px   ],
            value2 = values[ py   ],
            value3 = values[ pxy  ],
            value4 = values[ pz   ],
            value5 = values[ pxz  ],
            value6 = values[ pyz  ],
            value7 = values[ pxyz ];
        
        var isolevel = 0;
        
        var cubeindex = 0;
        if ( value0 < isolevel ) cubeindex |= 1;
        if ( value1 < isolevel ) cubeindex |= 2;
        if ( value2 < isolevel ) cubeindex |= 8;
        if ( value3 < isolevel ) cubeindex |= 4;
        if ( value4 < isolevel ) cubeindex |= 16;
        if ( value5 < isolevel ) cubeindex |= 32;
        if ( value6 < isolevel ) cubeindex |= 128;
        if ( value7 < isolevel ) cubeindex |= 64;
        
        // bits = 12 bit number, indicates which edges are crossed by the isosurface
        var bits = THREE.edgeTable[ cubeindex ];
        // if none are crossed, proceed to next iteration
        if ( bits === 0 ) continue;
        var mu = 0.5; 
        // bottom of the cube
        if ( bits & 1 )
        {       
            mu = ( isolevel - value0 ) / ( value1 - value0 );
            vlist[0] = points[p].clone().lerp( points[px], mu );
        }
        if ( bits & 2 )
        {
            mu = ( isolevel - value1 ) / ( value3 - value1 );
            vlist[1] = points[px].clone().lerp( points[pxy], mu );
        }
        if ( bits & 4 )
        {
            mu = ( isolevel - value2 ) / ( value3 - value2 );
            vlist[2] = points[py].clone().lerp( points[pxy], mu );
        }
        if ( bits & 8 )
        {
            mu = ( isolevel - value0 ) / ( value2 - value0 );
            vlist[3] = points[p].clone().lerp( points[py], mu );
        }
        // top of the cube
        if ( bits & 16 )
        {
            mu = ( isolevel - value4 ) / ( value5 - value4 );
            vlist[4] = points[pz].clone().lerp( points[pxz], mu );
        }
        if ( bits & 32 )
        {
            mu = ( isolevel - value5 ) / ( value7 - value5 );
            vlist[5] = points[pxz].clone().lerp( points[pxyz], mu );
        }
        if ( bits & 64 )
        {
            mu = ( isolevel - value6 ) / ( value7 - value6 );
            vlist[6] = points[pyz].clone().lerp( points[pxyz], mu );
        }
        if ( bits & 128 )
        {
            mu = ( isolevel - value4 ) / ( value6 - value4 );
            vlist[7] = points[pz].clone().lerp( points[pyz], mu );
        }
        // vertical lines of the cube
        if ( bits & 256 )
        {
            mu = ( isolevel - value0 ) / ( value4 - value0 );
            vlist[8] = points[p].clone().lerp( points[pz], mu );
        }
        if ( bits & 512 )
        {
            mu = ( isolevel - value1 ) / ( value5 - value1 );
            vlist[9] = points[px].clone().lerp( points[pxz], mu );
        }
        if ( bits & 1024 )
        {
            mu = ( isolevel - value3 ) / ( value7 - value3 );
            vlist[10] = points[pxy].clone().lerp( points[pxyz], mu );
        }
        if ( bits & 2048 )
        {
            mu = ( isolevel - value2 ) / ( value6 - value2 );
            vlist[11] = points[py].clone().lerp( points[pyz], mu );
        }
        
        // construct triangles -- get correct vertices from triTable.
        var i = 0;
        cubeindex <<= 4;  // multiply by 16... 
        while ( THREE.triTable[ cubeindex + i ] != -1 ) 
        {
            var index1 = THREE.triTable[cubeindex + i];
            var index2 = THREE.triTable[cubeindex + i + 1];
            var index3 = THREE.triTable[cubeindex + i + 2];
            
            geometry.vertices.push( vlist[index1].clone() );
            geometry.vertices.push( vlist[index2].clone() );
            geometry.vertices.push( vlist[index3].clone() );
            var face = new THREE.Face3(vertexIndex, vertexIndex+1, vertexIndex+2);
            geometry.faces.push( face );

            geometry.faceVertexUvs[ 0 ].push( [ new THREE.Vector2(0,0), new THREE.Vector2(0,1), new THREE.Vector2(1,1) ] );

            vertexIndex += 3;
            i += 3;
        }
    }
    
    //geometry.computeCentroids();
    geometry.computeFaceNormals();
    geometry.computeVertexNormals();

    var material    = new THREE.MeshNormalMaterial(); 
    
    var materialLines = new THREE.MeshBasicMaterial( { color: 0x0000ff, wireframe: true, side: THREE.DoubleSide } );
    mesh = new THREE.Mesh( geometry, new THREE.MeshNormalMaterial( {overdraw: 0.5, side: THREE.DoubleSide} ));

    scene.add(mesh);
}




function animate() 
{
    requestAnimationFrame( animate );
    render();       
    update();
}

function update()
{
    controls.update();
    stats.update();
}

function render() 
{
    renderer.render( scene, camera );
}





</script><canvas width="1440" height="832" style="width: 1440px; height: 832px;"></canvas>









</body></html>